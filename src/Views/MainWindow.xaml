<Window x:Class="AITeacherAssistant.Views.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:AITeacherAssistant.Views"
        mc:Ignorable="d"
        Title="AI Teacher Assistant Overlay" 
        WindowStyle="None"
        AllowsTransparency="True"
        Background="Transparent"
        WindowState="Maximized"
        Topmost="True"
        ShowInTaskbar="False"
        ResizeMode="NoResize">
    
    <Window.Resources>
        <!-- Tool Button Style -->
        <Style x:Key="ToolButtonStyle" TargetType="ToggleButton">
            <Setter Property="Background" Value="#CC2E2E2E"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="BorderBrush" Value="#666"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="FontSize" Value="20"/>
            <Style.Triggers>
                <Trigger Property="IsChecked" Value="True">
                    <Setter Property="Background" Value="#667eea"/>
                    <Setter Property="BorderBrush" Value="#5a67d8"/>
                    <Setter Property="BorderThickness" Value="2"/>
                </Trigger>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Background" Value="#3E3E3E"/>
                </Trigger>
            </Style.Triggers>
        </Style>
    </Window.Resources>
    
    <Grid>
        <!-- Transparent overlay container -->
        <Grid x:Name="OverlayGrid" Background="Transparent">
            
            <!-- ANNOTATION CANVAS -->
            <Canvas x:Name="AnnotationCanvas" 
                    Background="Transparent"
                    IsHitTestVisible="True"
                    MouseDown="AnnotationCanvas_MouseDown"
                    MouseMove="AnnotationCanvas_MouseMove"
                    MouseUp="AnnotationCanvas_MouseUp"/>
            
            <!-- ANNOTATION TOOLBAR (Left Side) -->
            <Border x:Name="AnnotationToolbar"
                    HorizontalAlignment="Left"
                    VerticalAlignment="Center"
                    Margin="10"
                    Background="#CC2E2E2E"
                    CornerRadius="12"
                    Padding="8">
                <StackPanel>
                    <!-- Toolbar Header -->
                    <TextBlock Text="Tools"
                             Foreground="White"
                             FontWeight="Bold"
                             FontSize="14"
                             Margin="4,0,4,10"
                             HorizontalAlignment="Center"/>
                    
                    <!-- Tool Buttons -->
                    <!-- Select/Move Tool -->
                    <ToggleButton x:Name="SelectToolButton"
                                Content="🖱️"
                                ToolTip="Select &amp; Move"
                                Width="50" Height="50"
                                Margin="4"
                                IsChecked="True"
                                Click="SelectTool_Click"
                                Style="{StaticResource ToolButtonStyle}"/>
                    
                    <!-- Pen Tool -->
                    <ToggleButton x:Name="PenToolButton"
                                Content="✏️"
                                ToolTip="Freehand Draw"
                                Width="50" Height="50"
                                Margin="4"
                                Click="PenTool_Click"
                                Style="{StaticResource ToolButtonStyle}"/>
                    
                    <!-- Text Tool -->
                    <ToggleButton x:Name="TextToolButton"
                                Content="T"
                                ToolTip="Add Text"
                                Width="50" Height="50"
                                Margin="4"
                                FontWeight="Bold"
                                FontSize="20"
                                Click="TextTool_Click"
                                Style="{StaticResource ToolButtonStyle}"/>
                    
                    <!-- Arrow Tool -->
                    <ToggleButton x:Name="ArrowToolButton"
                                Content="➡️"
                                ToolTip="Draw Arrow"
                                Width="50" Height="50"
                                Margin="4"
                                Click="ArrowTool_Click"
                                Style="{StaticResource ToolButtonStyle}"/>
                    
                    <!-- Circle Tool -->
                    <ToggleButton x:Name="CircleToolButton"
                                Content="⭕"
                                ToolTip="Draw Circle"
                                Width="50" Height="50"
                                Margin="4"
                                Click="CircleTool_Click"
                                Style="{StaticResource ToolButtonStyle}"/>
                    
                    <!-- Rectangle Tool -->
                    <ToggleButton x:Name="RectangleToolButton"
                                Content="▭"
                                ToolTip="Draw Rectangle"
                                Width="50" Height="50"
                                Margin="4"
                                FontSize="20"
                                Click="RectangleTool_Click"
                                Style="{StaticResource ToolButtonStyle}"/>
                    
                    <!-- Eraser Tool -->
                    <ToggleButton x:Name="EraserToolButton"
                                Content="🧹"
                                ToolTip="Erase"
                                Width="50" Height="50"
                                Margin="4"
                                Click="EraserTool_Click"
                                Style="{StaticResource ToolButtonStyle}"/>
                    
                    <!-- Separator -->
                    <Separator Margin="4,8" Background="#444"/>
                    
                    <!-- Color Picker -->
                    <TextBlock Text="Color"
                             Foreground="White"
                             FontSize="10"
                             Margin="4,4,4,2"
                             HorizontalAlignment="Center"/>
                    <UniformGrid Columns="3" Margin="4">
                        <Button Background="#f56565" Width="20" Height="20" 
                                Margin="2" Click="ColorButton_Click" Tag="#f56565"
                                BorderBrush="#666" Cursor="Hand"/>
                        <Button Background="#48bb78" Width="20" Height="20" 
                                Margin="2" Click="ColorButton_Click" Tag="#48bb78"
                                BorderBrush="#666" Cursor="Hand"/>
                        <Button Background="#667eea" Width="20" Height="20" 
                                Margin="2" Click="ColorButton_Click" Tag="#667eea"
                                BorderBrush="#666" Cursor="Hand"/>
                        <Button Background="#ed8936" Width="20" Height="20" 
                                Margin="2" Click="ColorButton_Click" Tag="#ed8936"
                                BorderBrush="#666" Cursor="Hand"/>
                        <Button Background="#000000" Width="20" Height="20" 
                                Margin="2" Click="ColorButton_Click" Tag="#000000"
                                BorderBrush="#666" Cursor="Hand"/>
                        <Button Background="#ffffff" Width="20" Height="20" 
                                Margin="2" Click="ColorButton_Click" Tag="#ffffff"
                                BorderBrush="#333" BorderThickness="1" Cursor="Hand"/>
                    </UniformGrid>
                    
                    <!-- Size Slider -->
                    <TextBlock Text="Size"
                             Foreground="White"
                             FontSize="10"
                             Margin="4,8,4,2"
                             HorizontalAlignment="Center"/>
                    <Slider x:Name="SizeSlider"
                            Minimum="1" Maximum="10" Value="2"
                            Width="50"
                            Margin="4"
                            ValueChanged="SizeSlider_ValueChanged"/>
                    
                    <!-- Separator -->
                    <Separator Margin="4,8" Background="#444"/>
                    
                    <!-- Action Buttons -->
                    <Button x:Name="DeleteButton"
                            Content="🗑️"
                            ToolTip="Delete Selected"
                            Width="50" Height="40"
                            Margin="4"
                            Click="DeleteButton_Click"
                            Background="#CC2E2E2E"
                            Foreground="White"
                            BorderBrush="#666"
                            Cursor="Hand"
                            IsEnabled="False"/>
                    
                    <Button x:Name="ClearAllButton"
                            Content="🧹All"
                            ToolTip="Clear All Annotations"
                            Width="50" Height="40"
                            Margin="4"
                            Click="ClearAllButton_Click"
                            Background="#CC2E2E2E"
                            Foreground="White"
                            BorderBrush="#666"
                            Cursor="Hand"
                            FontSize="10"/>
                    
                    <!-- Toggle Toolbar Button -->
                    <Button x:Name="ToggleToolbarButton"
                            Content="◀"
                            ToolTip="Hide Toolbar"
                            Width="50" Height="30"
                            Margin="4,12,4,4"
                            Click="ToggleToolbar_Click"
                            Background="#CC2E2E2E"
                            Foreground="White"
                            BorderBrush="#666"
                            Cursor="Hand"
                            FontSize="16"
                            FontWeight="Bold"/>
                </StackPanel>
            </Border>
            
            <!-- Show Toolbar Button (when hidden) -->
            <Button x:Name="ShowToolbarButton"
                    Content="▶"
                    ToolTip="Show Toolbar"
                    HorizontalAlignment="Left"
                    VerticalAlignment="Center"
                    Margin="10"
                    Width="30" Height="60"
                    Click="ToggleToolbar_Click"
                    Background="#CC2E2E2E"
                    Foreground="White"
                    BorderBrush="#666"
                    Cursor="Hand"
                    FontSize="16"
                    FontWeight="Bold"
                    Visibility="Collapsed"/>
            
            <!-- Control Panel (Top-Right Corner) -->
            <Border x:Name="ControlPanel" 
                    HorizontalAlignment="Right" 
                    VerticalAlignment="Top" 
                    Margin="10"
                    Background="#CC1E1E1E" 
                    CornerRadius="8" 
                    Padding="10">
                <StackPanel>
                    <TextBlock Text="AI Teacher Assistant" 
                               Foreground="White" 
                               FontWeight="Bold" 
                               FontSize="14" 
                               Margin="0,0,0,10"/>
                    
                    <TextBlock Foreground="LightGray" 
                               FontSize="10" 
                               TextWrapping="Wrap"
                               MaxWidth="200"
                               Margin="0,0,0,10">
                        <Run Text="Ctrl+Shift+Q: Toggle overlay"/><LineBreak/>
                        <Run Text="Ctrl+Shift+C: Clear screen"/>
                    </TextBlock>
                    
                    <Button x:Name="ClearScreenButton" 
                            Content="Clear Screen" 
                            Click="ClearScreenButton_Click"
                            Background="#CC2E2E2E"
                            Foreground="White"
                            BorderBrush="Gray"
                            Padding="8,4"
                            Cursor="Hand"
                            Margin="0,0,0,5"/>
                    
                    <Button x:Name="CloseSessionButton" 
                            Content="Close Session" 
                            Click="CloseSessionButton_Click"
                            Background="#CC2E2E2E"
                            Foreground="#ed8936"
                            BorderBrush="Gray"
                            Padding="8,4"
                            Cursor="Hand"
                            Margin="0,0,0,5"/>
                    
                    <Button x:Name="CloseButton" 
                            Content="Close App" 
                            Click="CloseButton_Click"
                            Background="#CC2E2E2E"
                            Foreground="#f56565"
                            BorderBrush="Gray"
                            Padding="8,4"
                            Cursor="Hand"/>
                </StackPanel>
            </Border>
            
            <!-- Status Indicator (Bottom-Left Corner) -->
            <Border x:Name="StatusIndicator" 
                    HorizontalAlignment="Left" 
                    VerticalAlignment="Bottom" 
                    Margin="10"
                    Background="#CC1E1E1E" 
                    CornerRadius="8" 
                    Padding="8">
                <StackPanel Orientation="Horizontal">
                    <Ellipse x:Name="StatusDot" 
                             Width="10" 
                             Height="10" 
                             Fill="LimeGreen" 
                             Margin="0,0,8,0"/>
                    <TextBlock x:Name="StatusText" 
                               Text="Overlay Active" 
                               Foreground="White" 
                               FontSize="12"/>
                </StackPanel>
            </Border>
        </Grid>
    </Grid>
</Window>
